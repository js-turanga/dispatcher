var $;(()=>{"use strict";var e={354:(e,t,s)=>{s(692);const r=s(818),{isNull:i,isString:n,isArray:c,isObject:a,isFunction:l,snakeCase:o}=s(853);e.exports=class{constructor(){this.listeners={},this.wildcardListeners={},this.cached={}}listen(e,t){if(!n(e)&&!c(e))throw new r("Failed to register event. Events should be provided as string or array of strings");(e=c(e)?e:[e]).forEach((e=>{!1===(e=o(e)).includes(".*")&&(this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)),!0===e.includes(".*")&&(this.wildcardListeners[e]||(this.wildcardListeners[e]=[]),this.wildcardListeners[e].push(t)),delete this.cached[e]}))}unlisten(e,t=null){e=o(e),i(t)&&(delete this.listeners[e],delete this.wildcardListeners[e]),!1===e.includes(".*")&&this.unregisterListener(e,t),!0===e.includes(".*")&&this.unregisterWildcardListener(e,t)}subscribe(e){if(!a(e)||"function"!=typeof e.getSubscribedEvents)throw new r("Subscriber must be of type object and must implement getSubscribedEvents method");const t=e.getSubscribedEvents();Object.entries(t).forEach((t=>{let[s,r]=t;s=o(s),n(r)&&this.listen(s,[e,r]),c(r)&&r.forEach((t=>{this.listen(s,[e,t])}))}))}unsubscribe(e){if(!a(e)||"function"!=typeof e.getSubscribedEvents)throw new r("Subscriber must be of type object and must implement getSubscribedEvents method");const t=e.getSubscribedEvents();Object.entries(t).forEach((t=>{let[s,r]=t;s=o(s),n(r)&&this.unlisten(s,[e,r]),c(r)&&r.forEach((t=>{this.unlisten(s,[e,t])}))}))}dispatch(e,t=null){const s="Event"===e.constructor.name||"Event"===Object.getPrototypeOf(e.constructor).name,[r,i]=this.parseEventAndPayload(e,t),n=this.getListeners(r),c=[];return Object.values(n).forEach((t=>{t=this.rebuildListener(t),s&&e.isPropagationStopped()||c.push(t(i,this))})),c}hasListeners(e=null){e=o(e);const t=this.listeners[e]||[],s=this.wildcardListeners[e]||[];if(!i(e))return Object.keys(t).length>0||Object.keys(s).length>0;const r=Object.assign({},this.listeners,this.wildcardListeners);return Object.keys(r).length>0}getListeners(e=null){e=o(e);const t=this.buildWildcardEvent(e);if(!i(e)){const s=this.listeners[e]||[],r=this.wildcardListeners[t]||[];return 0===Object.keys(s).length&&0===Object.keys(r).length?{}:(this.cached[e]||this.buildCache(e),Object.assign({},this.cached[e]??{},this.cached[t]??{}))}const s=Object.assign({},this.listeners,this.wildcardListeners);return Object.keys(s).forEach((e=>{this.cached[e]||this.buildCache(e)})),Object.assign({},this.cached)}buildCache(e=null){const t=this.buildWildcardEvent(e);this.listeners[e]&&Object.keys(this.listeners[e]).forEach((t=>{this.cached[e]||(this.cached[e]={}),this.cached[e][t]=this.listeners[e][t]})),this.wildcardListeners[t]&&Object.keys(this.wildcardListeners[t]).forEach((e=>{this.cached[t]||(this.cached[t]={}),this.cached[t][e]=this.wildcardListeners[t][e]}))}rebuildListener(e){return a(e)&&"function"==typeof e.__invoke&&(e=e.__invoke.bind(e)),c(e)&&e.length<=2&&"function"==typeof e[0]&&(e[0]=e[0](),e[1]=e[1]||"__invoke"),c(e)&&2==e.length&&"function"!=typeof e[0]&&(e=e[0][e[1]].bind(e[0])),e}parseEventAndPayload(e,t){return a(e)&&"Event"===e.constructor.name&&(t=e,e=e.constructor.name),a(e)&&"Event"===Object.getPrototypeOf(e.constructor).name&&(t=t||e,e=e.constructor.name),a(e)&&void 0!==e.name&&(t=t||e,e=e.name),[o(e),t]}unregisterListener(e,t){if(!this.listeners[e])return;const s=this.listeners[e];Object.entries(s).forEach((s=>{const[r,i]=s;(i==t||c(t)&&i[1]==t[1])&&(delete this.listeners[e][r],delete this.cached[e])})),this.listeners[e][0]||(delete this.listeners[e],delete this.cached[e])}unregisterWildcardListener(e,t){if(!this.wildcardListeners[e])return;const s=this.wildcardListeners[e];Object.entries(s).forEach((s=>{const[r,i]=s;i===t&&(delete this.wildcardListeners[e][r],delete this.cached[e])})),this.wildcardListeners[e][0]||(delete this.wildcardListeners[e],delete this.cached[e])}buildWildcardEvent(e){return i(e)||!1===e.includes(".")||!1!==e.includes(".*")?e:e.substr(0,e.indexOf("."))+".*"}}},692:(e,t,s)=>{const{isObject:r,isArray:i}=s(853),n=s(510);e.exports=class{constructor(e,t){this.subject=e,this.setArguments(t),this.propagationStopped=!1}isPropagationStopped(){return this.propagationStopped}stopPropagation(){this.propagationStopped=!0}getSubject(){return this.subject}setArguments(e){(r(e)||i(e))&&Object.keys(e).forEach((t=>{this[t]=e[t]}))}hasArgument(e){return null!=e&&e in this}getArguments(e){if(void 0!==e&&!this.hasArgument(e))throw new n("Event argument not found");if(void 0!==e&&this.hasArgument(e))return this[e];const t={};return Object.keys(this).forEach((e=>{"subject"!==e&&"propagationStopped"!==e&&(t[e]=this[e])})),t}serialize(){return{subject:this.subject,data:this.data}}}},818:e=>{class t extends Error{constructor(e,t,s){super(e),this.name="DispatcherException",this.meta=s}}e.exports=t},510:e=>{class t extends Error{constructor(e,t,s){super(e),this.name="EventException",this.meta=s}}e.exports=t},579:(e,t,s)=>{const r=s(354),i=s(692);e.exports={Dispatcher:r,Event:i}},853:e=>{e.exports={isNull:e=>null==e,isString:e=>"string"==typeof e,isNumber:e=>!isNaN(e),isArray:e=>Array.isArray(e),isObject:e=>"object"==typeof e&&!1===Array.isArray(e)&&null!==e,isFunction:e=>"function"==typeof e,contains:(e,t,s)=>-1!==e.indexOf(t,s),truncate:(t,s,r,i)=>(r=r||"...",s=i?s+1:s,(t=e.exports.trim(t)).length<=s?t:(t=t.substr(0,s-r.length),(t=i?t.substr(0,t.lastIndexOf(" ")):trim(t))+r)),trim:(e,t)=>(t=t||WHITE_SPACES,ltrim(rtrim(e,t),t)),crop:(t,s,r)=>e.exports.truncate(t,s,r,!0),lowerCase:e=>null==e?e:e.toLowerCase(),upperCase:e=>null==e?e:e.toUpperCase(),camelCase:t=>null==t?t:t=(t=e.exports.replaceAccents(t)).replace(/\-/g," ").replace(/\s[a-z]/g,e.exports.upperCase).replace(/\s+/g,"").replace(/^[A-Z]/g,e.exports.lowerCase),snakeCase:t=>null==t?t:e.exports.lowerCase(e.exports.camelCase(t).replace(/([A-Z])/g,"_$1").trim()),properCase:t=>null==t?t:e.exports.lowerCase(t).replace(/^\w|\s\w/g,e.exports.upperCase),pascalCase:t=>null==t?t:e.exports.camelCase(t).replace(/^[a-z]/,e.exports.upperCase),sentenceCase:t=>e.exports.lowerCase(t).replace(/(^\w)|\.\s+(\w)/gm,e.exports.upperCase),removeNonWord:e=>e.replace(/[^0-9a-zA-Z\xC0-\xFF \-]/g,""),replaceAccents:e=>(e.search(/[\xC0-\xFF]/g)>-1&&(e=e.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),e)}}},t={},s=function s(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,s),n.exports}(579);$=s})();